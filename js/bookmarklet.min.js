window.WpPressThis_Bookmarklet=function(a){function b(a,b){if("undefined"!=typeof b){var d=c.createElement("input");d.name=a,d.value=b,d.type="hidden",r.appendChild(d)}}var c=document,d=window,e=top.location,f=d.getSelection,g=c.getSelection,h=c.selection,i=f?f():g?g():h?h.createRange().text:0,j=encodeURI(i),k=(new Date).getTime();if(!a||!a.match(/^http/))return void d.alert("Sorry, no Press This URL provided.");if(a+=(a.indexOf("?")>-1?"&":"?")+"buster="+k,c.title.length&&c.title.length<=512&&(a+="&t="+encodeURI(c.title)),j.length&&j.length<=512&&(a+="&s="+j),!e.href.match(/^https?:/))return void(top.location.href=a);a+="&u="+encodeURI(e.href);var l=c.head.getElementsByTagName("meta"),m=c.head.getElementsByTagName("link"),n=c.getElementById("content"),o=n?n.getElementsByTagName("img"):[],p=c.body.getElementsByTagName("iframe")||[],q=new Image,r=c.createElement("form"),s="_press_this_app",t=null;e.href.match(/\/\/www\.youtube\.com\/watch/)?b("_embed[]",e.href):e.href.match(/\/\/vimeo\.com\/(.+\/)?([\d]+)$/)?b("_embed[]",e.href):e.href.match(/\/\/(www\.)?dailymotion\.com\/video\/.+$/)?b("_embed[]",e.href):e.href.match(/\/\/soundcloud\.com\/.+$/)?b("_embed[]",e.href):e.href.match(/\/\/twitter\.com\/[^\/]+\/status\/[\d]+$/)&&b("_embed[]",e.href),o&&o.length||(n=c.body.getElementsByClassName?c.body.getElementsByClassName("hfeed"):[],o=n.length?n[0].getElementsByTagName("img"):[],o&&o.length||(o=c.body.getElementsByTagName("img")||[]));for(var u=0;u<l.length&&!(u>=50);u++){var v=l[u],w=v.getAttribute("name"),x=v.getAttribute("property"),y=v.getAttribute("content");w?b("_meta["+w+"]",y):x&&b("_meta["+x+"]",y)}for(var z=0;z<m.length&&!(z>=50);z++){var A=m[z],B=A.getAttribute("rel");if(B)switch(B){case"canonical":case"icon":case"shortlink":b("_links["+B+"]",A.getAttribute("href"));break;case"alternate":"application/json+oembed"===A.getAttribute("type")?b("_links["+B+"]",A.getAttribute("href")):"handheld"===A.getAttribute("media")&&b("_links["+B+"]",A.getAttribute("href"))}}for(var C=0;C<o.length&&!(C>=100);C++)q.src=o[C].src,q.src.indexOf("gravatar.com")>-1||o[C].className&&o[C].className.length&&o[C].className.indexOf("avatar")>-1||(o[C].original&&o[C].original.length?b("_img[]",o[C].original):q.src.indexOf("/wp-content/uploads/")?b("_img[]",q.src):q.width&&q.height&&q.width>=256&&q.height>=128&&b("_img[]",q.src));for(var D=0;D<p.length&&!(D>=100);D++)t=p[D].src.match(/\/\/www\.youtube\.com\/embed\/([^\?]+)\?.+$/),t&&2===t.length&&b("_embed[]","https://www.youtube.com/watch?v="+t[1]),t=p[D].src.match(/\/\/player\.vimeo\.com\/video\/([\d]+)$/),t&&2===t.length&&b("_embed[]","https://vimeo.com/"+t[1]);c.title&&c.title>512&&b("t",c.title),j.length&&j.length>512&&b("s",i),r.setAttribute("method","POST"),r.setAttribute("action",a),r.setAttribute("target",s),r.setAttribute("style","display: none;"),d.open("about:blank",s,"width=500,height=700"),c.body.appendChild(r),r.submit()};